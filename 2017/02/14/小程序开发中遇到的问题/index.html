<!doctype html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="微信,小程序," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="今天公司的主项目保养小程序上线了，可以搜索小程序全名“4S店汽车维修保养”体验下，本人这次项目中主要负责样式和业务逻辑的实现，趁着有空写写开发中遇到的问题，都是小问题，重在积累.
样式问题样式单位小程序提供了两种单位：（1）rpx（responsive pixel）: 可以根据屏幕宽度进行自适应。规定屏幕宽为750rpx。如在iPhone6上，屏幕宽度为375px，共有750个物理像素，则750r">
<meta property="og:type" content="article">
<meta property="og:title" content="小程序开发中遇到的问题">
<meta property="og:url" content="http://yoursite.com/2017/02/14/小程序开发中遇到的问题/index.html">
<meta property="og:site_name" content="manlili blog">
<meta property="og:description" content="今天公司的主项目保养小程序上线了，可以搜索小程序全名“4S店汽车维修保养”体验下，本人这次项目中主要负责样式和业务逻辑的实现，趁着有空写写开发中遇到的问题，都是小问题，重在积累.
样式问题样式单位小程序提供了两种单位：（1）rpx（responsive pixel）: 可以根据屏幕宽度进行自适应。规定屏幕宽为750rpx。如在iPhone6上，屏幕宽度为375px，共有750个物理像素，则750r">
<meta property="og:image" content="https://manlili.github.io/img/170213/transfonter.png">
<meta property="og:image" content="https://manlili.github.io/img/170213/button.jpg">
<meta property="og:image" content="https://manlili.github.io/img/170213/calendar.png">
<meta property="og:image" content="https://manlili.github.io/img/170213/order.jpg">
<meta property="og:image" content="https://manlili.github.io/img/170213/discount.jpg">
<meta property="og:updated_time" content="2017-02-14T10:09:31.546Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="小程序开发中遇到的问题">
<meta name="twitter:description" content="今天公司的主项目保养小程序上线了，可以搜索小程序全名“4S店汽车维修保养”体验下，本人这次项目中主要负责样式和业务逻辑的实现，趁着有空写写开发中遇到的问题，都是小问题，重在积累.
样式问题样式单位小程序提供了两种单位：（1）rpx（responsive pixel）: 可以根据屏幕宽度进行自适应。规定屏幕宽为750rpx。如在iPhone6上，屏幕宽度为375px，共有750个物理像素，则750r">
<meta name="twitter:image" content="https://manlili.github.io/img/170213/transfonter.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2017/02/14/小程序开发中遇到的问题/"/>





  <title> 小程序开发中遇到的问题 | manlili blog </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?f37e17c195d69bf54199e99faa624b7b　";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>










  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">manlili blog</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
    
      <p class="site-subtitle">记录技术上的点点心得</p>
    
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-commonweal">
          <a href="/404.html" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br />
            
            公益404
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/02/14/小程序开发中遇到的问题/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="满利利">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/uploads/avatar.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="manlili blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="manlili blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                小程序开发中遇到的问题
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-02-14T18:08:21+08:00">
                2017-02-14
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/心得体会/" itemprop="url" rel="index">
                    <span itemprop="name">心得体会</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/02/14/小程序开发中遇到的问题/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/02/14/小程序开发中遇到的问题/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2017/02/14/小程序开发中遇到的问题/" class="leancloud_visitors" data-flag-title="小程序开发中遇到的问题">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>今天公司的主项目保养小程序上线了，可以搜索小程序全名“4S店汽车维修保养”体验下，本人这次项目中主要负责样式和业务逻辑的实现，趁着有空写写开发中遇到的问题，都是小问题，重在积累.</p>
<h2 id="样式问题"><a href="#样式问题" class="headerlink" title="样式问题"></a>样式问题</h2><h3 id="样式单位"><a href="#样式单位" class="headerlink" title="样式单位"></a>样式单位</h3><p>小程序提供了两种单位：<br>（1）rpx（responsive pixel）: 可以根据屏幕宽度进行自适应。规定屏幕宽为750rpx。如在iPhone6上，屏幕宽度为375px，共有750个物理像素，则750rpx = 375px = 750物理像素，1rpx = 0.5px = 1物理像素。<br>（2）rem（root em）: 规定屏幕宽度为20rem；1rem = (750/20)rpx 。<br>根据我们公司的设计稿（以苹果6为标准设计），我选择了rpx，我们的设计稿宽度是750px，直接可以用设计稿上的1px = 1rpx<br>（这里必须提的就是微信0.5px的实现，直接用1rpx，这样就能做出很细的线，但是很多安卓低端机上面还是将0.5px当做1px渲染）</p>
<h3 id="可使用的标签"><a href="#可使用的标签" class="headerlink" title="可使用的标签"></a>可使用的标签</h3><p>下面是项目中总结出来的项目中总结出来部分标签<br>（1）支持的标签： view text span image ul li picker footer header table ::after ::before<br>（2）不支持的标签： div img del </p>
<h3 id="引入icon"><a href="#引入icon" class="headerlink" title="引入icon"></a>引入icon</h3><p>小程序提供了一些基本的icon，但是远远满足不了我们项目需求，为了不引入图片增加额外的服务器请求，我的解决方式是采取base64的方式，先到阿里巴巴矢量图标库[<a href="http://iconfont.cn/]生成自己的字体图标，并下载下来，找到ttf格式文件然后去[https://transfonter.org/]，把字体文件转化成base64格式,按下图进行" target="_blank" rel="external">http://iconfont.cn/]生成自己的字体图标，并下载下来，找到ttf格式文件然后去[https://transfonter.org/]，把字体文件转化成base64格式,按下图进行</a><br><img src="https://manlili.github.io/img/170213/transfonter.png" alt="图">然后将生成的代码拷贝进全局global.css就可以实现引入icon，注意引入icon的方式用伪元素实现。<br>需要注意的是tabbar不支持icon，只支持图片和文字。</p>
<h3 id="引入自定义组件"><a href="#引入自定义组件" class="headerlink" title="引入自定义组件"></a>引入自定义组件</h3><p>（1）import方式<br>import可以在该文件中使用目标文件定义的template，而且有作用域的概念，即只会 import 目标文件中定义的 template，而不会 import 目标文件 import 的 template。<br>（2）include方式<br>include可以将目标文件除了template的整个代码引入，相当于是拷贝到include位置<br>详见[<a href="https://mp.weixin.qq.com/debug/wxadoc/dev/framework/view/wxml/import.html" target="_blank" rel="external">https://mp.weixin.qq.com/debug/wxadoc/dev/framework/view/wxml/import.html</a>]<br>由于项目需要引入自定义的组件，比如提示表单验证，比如网速慢正在加载中，或者其他什么提示类的组件，所以我这里采取了比较简单的include方式</p>
<h3 id="btn"><a href="#btn" class="headerlink" title="btn"></a>btn</h3><p>小程序的button里面文字的垂直居中实现的方式是line-height，也就是说遇见下面情况button中文字就没法像平时那样垂直居中<br><img src="https://manlili.github.io/img/170213/button.jpg" alt="图"><br>因为是上图中button高度不一样，没有办法定义一个固定的line-height，解决的方式如下（不是唯一的）：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">.father &#123;</div><div class="line">	position:absolute;</div><div class="line">	top:0;</div><div class="line">	right:0;</div><div class="line">	z-index:1;</div><div class="line">	height:100%;</div><div class="line">	width:115rpx;</div><div class="line">	background-color:<span class="comment">#fa5a4d;</span></div><div class="line">	color:<span class="comment">#fff;</span></div><div class="line">	font-size:30rpx;</div><div class="line">&#125;</div><div class="line">.child &#123;</div><div class="line">	position:absolute;</div><div class="line">	top:50%;</div><div class="line">	-webkit-transform:translateY(-50%);</div><div class="line">	transform:translateY(-50%);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>就是将父元素的高度定义为整个框的高度，然后对里面的child进行垂直居中。</p>
<h3 id="float布局bug"><a href="#float布局bug" class="headerlink" title="float布局bug"></a>float布局bug</h3><p>可能是微信小程序的bug，我在写日历页如下图<br><img src="https://manlili.github.io/img/170213/calendar.png" alt="图"><br>上图中每一天用到了float布局排列，其他组件也用到了float布局，大面积使用float布局，在安卓手机上没有问题，但是在苹果手机上却是乱的，找不到错误的原因，就暂时用display：inline-block解决</p>
<h3 id="样式引入图片"><a href="#样式引入图片" class="headerlink" title="样式引入图片"></a>样式引入图片</h3><p>样式里面引入的图片不能为本地图片，需要是https格式，比如<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">.bi-sex &#123;</div><div class="line">  width: 90rpx;</div><div class="line">  height: 90rpx;</div><div class="line">  background: url(https://img06.lechebangstatic.com/webapp/book/book291481adbf.png) no-repeat center center;</div><div class="line">  -webkit-background-size: 180rpx 180rpx;</div><div class="line">  background-size: 180rpx 180rpx;</div><div class="line">  display: inline-block;</div><div class="line">  margin-left: 10rpx;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>引入本地图片，本地可以调试可以看见，一旦发布到测试环境则会发现图片不见了，所以需要替换图片的地址。</p>
<h3 id="table布局渲染"><a href="#table布局渲染" class="headerlink" title="table布局渲染"></a>table布局渲染</h3><p>微信小程序里面会将table布局渲染成wx-table wx-td等等，这点要分清，要不然调样式很容易找不到对应的类名</p>
<h3 id="固定底部与固定顶部布局"><a href="#固定底部与固定顶部布局" class="headerlink" title="固定底部与固定顶部布局"></a>固定底部与固定顶部布局</h3><p>虽说微信提供了tabbar，但是他是针对页面切换，当一个页面需要切换不同的条件比如<br><img src="https://manlili.github.io/img/170213/order.jpg" alt="图"><br>上图中顶部需要固定的bar不用像H5里面做各种兼容，直接用fixed布局就可以，不用考虑input聚焦时fixed布局的问题，微信已经帮我们做好了，很方便</p>
<h3 id="样式技巧"><a href="#样式技巧" class="headerlink" title="样式技巧"></a>样式技巧</h3><p>小程序是运行在微信提供的 webview 上面，也就是说他们封装了一系列的属性，比如page ,button ,如果想改变微信固有标签的样式，只需要直接写个一样的类名加样式就可以了，小程序还是很人性化的，将开发者的样式权限提高。<br>开发完20多个页面的样式整体的感受如下（只是本人愚见）：<br>（1）有点讨厌微信自定义标签，比如view，image其实完全可以用div，img代替，当然这也是它提高竞争力的表现<br>（2）微信文字与文字，数字，图片的对齐方式做的很好，以前H5项目中需要微调很多小细节，在小程序里面正常布局都差不多已经自动对齐了，不需要多担心。<br>（3）微信的1rpx做的很惊喜，因为大胆的实现了0.5px，先不说兼容性，至少0.5px使H5页面更像原生的app</p>
<h2 id="业务逻辑问题"><a href="#业务逻辑问题" class="headerlink" title="业务逻辑问题"></a>业务逻辑问题</h2><h3 id="点击事件"><a href="#点击事件" class="headerlink" title="点击事件"></a>点击事件</h3><p>具体如下图<br><img src="https://manlili.github.io/img/170213/discount.jpg" alt="图"><br>上图中如果想点击查看使用规则详情而不是选择使用这张券的话，就需要使用阻止事件冒泡。<br>小程序的事件分为冒泡事件和非冒泡事件：<br>（1）冒泡事件：当一个组件上的事件被触发后，该事件会向父节点传递<br>（2）非冒泡事件：当一个组件上的事件被触发后，该事件不会向父节点传递。<br>bindtap事件绑定不会阻止冒泡事件向上冒泡，catchtap事件绑定可以阻止冒泡事件向上冒泡。<br>根据这个页面的的需求，选择使用catchtap。</p>
<h3 id="wx-key"><a href="#wx-key" class="headerlink" title="wx:key"></a>wx:key</h3><p>小程序我们列表渲染的时候会用到wx:for，它有个属性wx:key：<br>即当数据改变触发渲染层重新渲染的时候，会校正带有 key 的组件，框架会确保他们被重新排序，而不是重新创建，以确保使组件保持自身的状态，并且提高列表渲染时的效率。<br>不得不说这个属性很好用，当我们需要按不同条件排列列表的时候，列表可以不用重新渲染，只是调换下位置，避免了用户的等待时间。</p>
<h3 id="setData"><a href="#setData" class="headerlink" title="setData"></a>setData</h3><p>页面渲染完以后再去改数据，直接修改this.data无效，无法改变页面的状态，还会造成数据不一致，如果使用setData就可以解决了,格式如下<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">this.setData(&#123;</div><div class="line">  text: <span class="string">'changed data'</span></div><div class="line">&#125;)</div></pre></td></tr></table></figure></p>
<h3 id="事件传值"><a href="#事件传值" class="headerlink" title="事件传值"></a>事件传值</h3><p>html与js传值时，可以用自定义属性(data-*)实现html触发的事件时，会发送给事件处理函数<br>例如视图代码如下<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;view class=<span class="string">"bd-noorder-tips"</span> data-id=<span class="string">"&#123;&#123;id&#125;&#125;"</span> bindtap=<span class="string">"ruleAction"</span>&gt;</div><div class="line">	使用规则</div><div class="line">&lt;/view&gt;</div></pre></td></tr></table></figure></p>
<p>逻辑层代码如下<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">ruleAction (e) &#123;</div><div class="line">	console.log(e.currentTarget.dataset.id)</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="页面跳转"><a href="#页面跳转" class="headerlink" title="页面跳转"></a>页面跳转</h3><p>（1）navigaterTo可以再url后面还拼参数，这样可以把需要的参数带到别的页面，<br>（2）navigaterBack是无法往回带参数的然后有的时候需要去别的页面插值的时候需要往上一级页面传参，这里我是用的setStorage的方式写入缓存中，这样在上一级页面的onShow中可以再进行塞值处理</p>
<h3 id="wx-navigateTo无法打开页面"><a href="#wx-navigateTo无法打开页面" class="headerlink" title="wx.navigateTo无法打开页面"></a>wx.navigateTo无法打开页面</h3><p>（1）wx.navigateTo保留当前页面，跳转到应用内的某个页面<br>（2）wx.navigateTo关闭当前页面，跳转到应用内的某个页面<br>wx.navigateTo无法打开页面，微信小程序规定一个应用同时只能打开5个页面，当已经打开了5个页面之后，wx.navigateTo不能正常打开新页面。请避免多层级的交互方式，或者使用wx.redirectTo</p>
<h3 id="添加类名"><a href="#添加类名" class="headerlink" title="添加类名"></a>添加类名</h3><p>js添加类名的方法我只找到了一种，感觉使用三元表达式添加类名不怎么美观，但是找不到第二种方法了，使用方法如下<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;view class=<span class="string">"bd-coupon-price &#123;&#123;item.strategyKind === 1 ? 'bd-coupon-yellow-bg' : ''&#125;&#125; &#123;&#123;item.strategyKind === 2 ? 'bd-coupon-blue-bg' : ''&#125;&#125;"</span>&gt;&lt;/view&gt;</div></pre></td></tr></table></figure></p>
<h3 id="输入法中键盘完成按钮触发"><a href="#输入法中键盘完成按钮触发" class="headerlink" title="输入法中键盘完成按钮触发"></a>输入法中键盘完成按钮触发</h3><p>在input输入文字的时候，习惯性用输入法键盘中的“完成”按钮，这时候会自动提交表单，小程序提供了这个方法bindconfirm<br>点击完成按钮时触发，event.detail = {value: value}</p>
<h3 id="使用local跨页面传值"><a href="#使用local跨页面传值" class="headerlink" title="使用local跨页面传值"></a>使用local跨页面传值</h3><p>小程序里面不能使用session传值，所以项目里面使用local传值。</p>
<h2 id="技巧性问题"><a href="#技巧性问题" class="headerlink" title="技巧性问题"></a>技巧性问题</h2><h3 id="注册页面"><a href="#注册页面" class="headerlink" title="注册页面"></a>注册页面</h3><p>每一个新写的页面必须在app.json的pages里面<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="string">"pages"</span>:[</div><div class="line"></div><div class="line">    <span class="string">"pages/index/index"</span>,</div><div class="line"></div><div class="line">    <span class="string">"pages/detail/detail"</span></div><div class="line"></div><div class="line">  ],</div></pre></td></tr></table></figure></p>
<p>注意第一个页面路径是页面渲染起始页面，所以开发时为了方便开发可以在app.json里面将正在开发的页面置顶，</p>
<h3 id="将开发页面设为初始渲染页面"><a href="#将开发页面设为初始渲染页面" class="headerlink" title="将开发页面设为初始渲染页面"></a>将开发页面设为初始渲染页面</h3><p>方法一：<br>app.json的pages里面将开发页面配置为第一个</p>
<p>方法二：<br>小程序开发编辑器右侧-&gt;编译-&gt;设置启动页面 *必填-&gt;写入pages/开发页面名字，但是弊端就是页面的title仍旧是app.json的pages配置第一个页面的title，但是不影响开发。</p>
<h3 id="创建新页面注意"><a href="#创建新页面注意" class="headerlink" title="创建新页面注意"></a>创建新页面注意</h3><p>注意创建*.json的时候需要写点代码，空着的json文件会报错</p>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        
  <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
    <div>打赏我的人运气不会太差哦！</div>
    <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
      <span>赏</span>
    </button>
    <div id="QR" style="display: none;">
      
        <div id="wechat" style="display: inline-block">
          <img id="wechat_qr" src="https://manlili.github.io/img/pay/wetcharpay.png" alt="满利利 WeChat Pay"/>
          <p>微信打赏</p>
        </div>
      
      
        <div id="alipay" style="display: inline-block">
          <img id="alipay_qr" src="https://manlili.github.io/img/pay/Alipay.jpg" alt="满利利 Alipay"/>
          <p>支付宝打赏</p>
        </div>
      
    </div>
  </div>


      
    </div>


    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/微信/" rel="tag"># 微信</a>
          
            <a href="/tags/小程序/" rel="tag"># 小程序</a>
          
        </div>
      

      
        
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2016/06/10/Vue中class与style绑定/" rel="next" title="Vue中class与style绑定">
                <i class="fa fa-chevron-left"></i> Vue中class与style绑定
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>

          
          </div>
          


          
  <div class="comments" id="comments">
    
      <div class="ds-thread" data-thread-key="2017/02/14/小程序开发中遇到的问题/"
           data-title="小程序开发中遇到的问题" data-url="http://yoursite.com/2017/02/14/小程序开发中遇到的问题/">
      </div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/uploads/avatar.jpg"
               alt="满利利" />
          <p class="site-author-name" itemprop="name">满利利</p>
           
              <p class="site-description motion-element" itemprop="description">前端开发/走向全栈/幽默有趣</p>
          
        </div>
        <nav class="site-state motion-element">
        
          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">17</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">7</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              
                <span class="site-state-item-count">26</span>
                <span class="site-state-item-name">标签</span>
              
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="" target="_blank" title="644166434">
                  
                    <i class="fa fa-fw fa-qq"></i>
                  
                  644166434
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://github.com/manlili" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#样式问题"><span class="nav-number">1.</span> <span class="nav-text">样式问题</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#样式单位"><span class="nav-number">1.1.</span> <span class="nav-text">样式单位</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#可使用的标签"><span class="nav-number">1.2.</span> <span class="nav-text">可使用的标签</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#引入icon"><span class="nav-number">1.3.</span> <span class="nav-text">引入icon</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#引入自定义组件"><span class="nav-number">1.4.</span> <span class="nav-text">引入自定义组件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#btn"><span class="nav-number">1.5.</span> <span class="nav-text">btn</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#float布局bug"><span class="nav-number">1.6.</span> <span class="nav-text">float布局bug</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#样式引入图片"><span class="nav-number">1.7.</span> <span class="nav-text">样式引入图片</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#table布局渲染"><span class="nav-number">1.8.</span> <span class="nav-text">table布局渲染</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#固定底部与固定顶部布局"><span class="nav-number">1.9.</span> <span class="nav-text">固定底部与固定顶部布局</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#样式技巧"><span class="nav-number">1.10.</span> <span class="nav-text">样式技巧</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#业务逻辑问题"><span class="nav-number">2.</span> <span class="nav-text">业务逻辑问题</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#点击事件"><span class="nav-number">2.1.</span> <span class="nav-text">点击事件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#wx-key"><span class="nav-number">2.2.</span> <span class="nav-text">wx:key</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#setData"><span class="nav-number">2.3.</span> <span class="nav-text">setData</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#事件传值"><span class="nav-number">2.4.</span> <span class="nav-text">事件传值</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#页面跳转"><span class="nav-number">2.5.</span> <span class="nav-text">页面跳转</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#wx-navigateTo无法打开页面"><span class="nav-number">2.6.</span> <span class="nav-text">wx.navigateTo无法打开页面</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#添加类名"><span class="nav-number">2.7.</span> <span class="nav-text">添加类名</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#输入法中键盘完成按钮触发"><span class="nav-number">2.8.</span> <span class="nav-text">输入法中键盘完成按钮触发</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#使用local跨页面传值"><span class="nav-number">2.9.</span> <span class="nav-text">使用local跨页面传值</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#技巧性问题"><span class="nav-number">3.</span> <span class="nav-text">技巧性问题</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#注册页面"><span class="nav-number">3.1.</span> <span class="nav-text">注册页面</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#将开发页面设为初始渲染页面"><span class="nav-number">3.2.</span> <span class="nav-text">将开发页面设为初始渲染页面</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#创建新页面注意"><span class="nav-number">3.3.</span> <span class="nav-text">创建新页面注意</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">满利利</span>
</div>



        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  




  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"manlili"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
    
    <script src="/lib/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
    <script src="/js/src/hook-duoshuo.js"></script>
  













  
  

  

  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
  <script>AV.initialize("Y2iTQ8Fc2RRvW4mqBqzfOdSX-gzGzoHsz", "gHlHLDuIiCTTcE93RMzpOYxY");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  


</body>
</html>
